<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>Mochica Bubbles</title>
		<meta name="viewport" content="width=800" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
		<script type="text/javascript" src="moenjin-web.js"></script>
		<script type="text/javascript" src="bubble.js"></script>
		<script type="text/javascript">			
			var g_app = null;
			var g_panel = null;

			function setup() {
				g_app = new MoApplication();
				g_app.setEnableStatsGraph(true);
				
				var surface = MoDisplaySurface.fromCanvas(document.getElementById("main"));

				var content = new MoCanvas("mainContent");
				content.setPercentWidth(100);
				content.setPercentHeight(100);
				content.setBackground(MoSolidColorBrush.fromColorHex("#000000"));

				surface.setChild(content);

				g_app.addDisplaySurface(surface);
				
				
				g_app.addEventHandler(MoEvent.UI_ORIENTATION_CHANGE, this.handleOrientationChange.asDelegate(this));
				
				initBubbles(content);
			}
			
			function handleOrientationChange(event) {
				console.log(MoApplication.getInstance().getOrientation());
			}
			
			function initBubbles(content) {
				var bubble = new Bubble("bubble01");
				bubble.setWidth(300);
				bubble.setHeight(100);
				bubble.setStartX(400);
				bubble.setStartY(400);
				bubble.setGravity(-0.0008);
				
				content.add(bubble);
				
				var bubble = new Bubble("bubble02");
				bubble.setWidth(300);
				bubble.setHeight(1);
				bubble.setRadius(75);
				bubble.setStartX(100);
				bubble.setStartY(500);
				bubble.setGravity(-0.00035);
				content.add(bubble);
				
				var bubble = new Bubble("bubble03");
				bubble.setWidth(300);
				bubble.setHeight(1);
				bubble.setRadius(25);
				bubble.setStartX(250);
				bubble.setStartY(450);
				bubble.setGravity(-0.0005);
				content.add(bubble);
			}
		</script>
		<style type="text/css">
			html, body {
				width: 100%;
				height: 100%;
				margin: 0px;
			}
		</style>
	</head>
	<body onload="setup()">
		<canvas id="main" width="800px" height="600px" />
	</body>
</html>